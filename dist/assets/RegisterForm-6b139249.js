import{r as d,bR as q,bS as F,V as N,Q as e,T as s,L as c,A as r,bC as y,B as g,b9 as B,bT as O,bD as f,bF as E}from"./index-9a78810f.js";import{b as M,F as t,R as a}from"./validator-ab66ccab.js";import{d as P}from"./TextArea-3e2c091d.js";import{b as U}from"./branch.loader-c9012d5a.js";import{u as V,D as G,m as H}from"./city.loader-8bb278bc.js";import{R as h,g as K}from"./branch.service-53284dc8.js";import{S as p}from"./index-7c45ffbc.js";import{I as m}from"./index-16334ca6.js";import"./useMutation-302e202b.js";import"./utils-0507c293.js";import"./useQuery-e8d2bc3e.js";import"./InfoCircleFilled-caf22935.js";const A="_form_1n5i5_1",Q="_row_1n5i5_18",z="_label_1n5i5_22",J="_input_1n5i5_31",W="_btns_1n5i5_35",i={form:A,row:Q,label:z,input:J,btns:W};function oe(){const[_,C]=d.useState([]),[T,u]=d.useState(!1),[l,w]=d.useState(),k=q(F),[x]=M(),{data:I,isLoading:R}=V({}),{t:j}=N(),v=n=>n&&n<=f().endOf("day").add(-1,"day"),S=U({config:{onSuccess:()=>{H.success("Đăng ký thành công!")}}}),D=async n=>{u(!0);const b=await K({city_id:n});b.message||C(b),u(!1)},o=[{key:"branch_id",label:e.jsxs(s.Text,{children:["Trung tâm Kiness ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsxs(c,{gutter:24,children:[e.jsx(r,{span:7,children:e.jsx(t.Item,{name:"city_id",rules:[...a.required],children:e.jsx(p,{loading:R,placeholder:"Chọn tỉnh, thành phố",style:{width:"100%"},onChange:D,options:I||[]})})}),e.jsx(r,{span:13,children:e.jsx(t.Item,{name:"branch_id",rules:[...a.required],children:e.jsx(p,{loading:T,placeholder:"Chọn chi nhánh",style:{width:"100%"},options:_||[]})})})]})},{key:"fullname",label:e.jsxs(s.Text,{children:["Tên người ĐK kiểm tra"," ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(r,{span:7,children:e.jsx(t.Item,{name:"fullname",rules:[...a.required,...a.people_name],children:e.jsx(m,{placeholder:"Họ và tên"})})})},{key:"gender",label:e.jsxs(s.Text,{children:["Giới tính ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(r,{children:e.jsx(t.Item,{name:"gender",rules:[...a.required],initialValue:"0",children:e.jsxs(h.Group,{children:[e.jsx(h,{value:"0",children:" Nam "}),e.jsx(h,{value:"1",children:" Nữ "})]})})})},{key:"level",label:e.jsxs(s.Text,{children:["Cấp ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(t.Item,{name:"level",wrapperCol:{span:20},rules:[...a.required],children:e.jsx(p,{placeholder:"Chọn",options:[{value:"Mẫu giáo",label:"Mẫu giáo"},{value:"Cấp 1",label:"Cấp 1"},{value:"Cấp 2",label:"Cấp 2"},{value:"Cấp 3",label:"Cấp 3"},{value:"Đại học",label:"Đại học"}]})})},{key:"date",label:e.jsxs(s.Text,{children:["Ngày đặt kiểm tra ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(t.Item,{name:"date",wrapperCol:{span:7},rules:[...a.required],children:e.jsx(G,{onChange:n=>w(n),value:l!=null&&l.isValid()?l:void 0,format:y,placeholder:y.toLowerCase(),name:"date",disabledDate:v})})},{key:"phone_number",label:e.jsxs(s.Text,{children:["Số điện thoại ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(t.Item,{name:"phone_number",wrapperCol:{span:7},rules:[...a.required,...a.phone],children:e.jsx(m,{placeholder:"Số điện thoại"})})},{key:"address",label:e.jsxs(s.Text,{children:["Địa chỉ ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(t.Item,{name:"address",wrapperCol:{span:20},rules:[...a.required],children:e.jsx(m,{placeholder:"Địa chỉ"})})},{key:"detail",label:e.jsx(s.Text,{children:"Chi tiết"}),input:e.jsx(t.Item,{name:"detail",wrapperCol:{span:20},children:e.jsx(P,{rows:5,placeholder:"Chi tiết"})})}],L=n=>{S.mutate({...n,date:f(l).format(E),created_by_user_id:k.user_id||1}),x.resetFields()};return e.jsxs(t,{className:i.form,form:x,onFinish:L,children:[o==null?void 0:o.map(n=>e.jsxs(c,{className:i.row,children:[e.jsx(r,{className:i.label,style:{width:200},children:n.label}),e.jsx(r,{flex:"auto",className:i.input,children:n.input})]},n.key)),e.jsxs(c,{gutter:24,className:i.btns,children:[e.jsx(r,{offset:12,children:e.jsx(t.Item,{children:e.jsx(g,{type:"default",htmlType:"reset",children:e.jsx(B,{to:O,children:j("all.btn_cancel")})})})}),e.jsx(r,{children:e.jsx(t.Item,{children:e.jsx(g,{type:"primary",htmlType:"submit",children:j("all.btn_register")})})})]})]})}export{oe as default};
