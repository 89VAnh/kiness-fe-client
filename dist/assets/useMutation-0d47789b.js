import{r as f,a7 as U,aL as $,aa as D,f as A,ai as M,af as p,a5 as O,d9 as L,da as j,db as k,dc as I,R as h,dd as T,de as V,df as q}from"./index-b1f5c75a.js";import{s as B}from"./utils-0507c293.js";var H=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],F=f.forwardRef(function(r,o){var s,n=r.prefixCls,e=n===void 0?"rc-checkbox":n,t=r.className,c=r.style,b=r.checked,a=r.disabled,i=r.defaultChecked,m=i===void 0?!1:i,l=r.type,d=l===void 0?"checkbox":l,S=r.title,R=r.onChange,_=U(r,H),v=f.useRef(null),x=$(m,{value:b}),g=D(x,2),y=g[0],E=g[1];f.useImperativeHandle(o,function(){return{focus:function(){var u;(u=v.current)===null||u===void 0||u.focus()},blur:function(){var u;(u=v.current)===null||u===void 0||u.blur()},input:v.current}});var N=A(e,t,(s={},M(s,"".concat(e,"-checked"),y),M(s,"".concat(e,"-disabled"),a),s)),w=function(u){a||("checked"in r||E(u.target.checked),R==null||R({target:O(O({},r),{},{type:d,checked:u.target.checked}),stopPropagation:function(){u.stopPropagation()},preventDefault:function(){u.preventDefault()},nativeEvent:u.nativeEvent}))};return f.createElement("span",{className:N,title:S,style:c},f.createElement("input",p({},_,{className:"".concat(e,"-input"),ref:v,onChange:w,disabled:a,checked:!!y,type:d})),f.createElement("span",{className:"".concat(e,"-inner")}))}),Q=function(r){L(o,r);function o(n,e){var t;return t=r.call(this)||this,t.client=n,t.setOptions(e),t.bindMethods(),t.updateResult(),t}var s=o.prototype;return s.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},s.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},s.onUnsubscribe=function(){if(!this.listeners.length){var e;(e=this.currentMutation)==null||e.removeObserver(this)}},s.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)},s.getCurrentResult=function(){return this.currentResult},s.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},s.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,p({},this.options,{variables:typeof e<"u"?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},s.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:j(),t=p({},e,{isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=t},s.notify=function(e){var t=this;k.batch(function(){t.mutateOptions&&(e.onSuccess?(t.mutateOptions.onSuccess==null||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(t.mutateOptions.onError==null||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach(function(c){c(t.currentResult)})})},o}(I);function G(r,o,s){var n=h.useRef(!1),e=h.useState(0),t=e[1],c=T(r,o,s),b=V(),a=h.useRef();a.current?a.current.setOptions(c):a.current=new Q(b,c);var i=a.current.getCurrentResult();h.useEffect(function(){n.current=!0;var l=a.current.subscribe(k.batchCalls(function(){n.current&&t(function(d){return d+1})}));return function(){n.current=!1,l()}},[]);var m=h.useCallback(function(l,d){a.current.mutate(l,d).catch(q)},[]);if(i.error&&B(void 0,a.current.options.useErrorBoundary,[i.error]))throw i.error;return p({},i,{mutate:m,mutateAsync:i.mutate})}export{F as C,G as u};
