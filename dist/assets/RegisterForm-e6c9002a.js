import{r as p,bR as q,bS as F,V as N,Q as e,T as s,L as c,A as r,bC as g,B as y,b9 as B,bT as E,bD as L,bF as O}from"./index-9a78810f.js";import{b as M,F as l,R as n}from"./validator-ab66ccab.js";import{d as P}from"./TextArea-3e2c091d.js";import{a as U}from"./branch.loader-c9012d5a.js";import{u as V,D as G,m as H}from"./city.loader-8bb278bc.js";import{R as h,g as A}from"./branch.service-53284dc8.js";import{S as u}from"./index-7c45ffbc.js";import{I as x}from"./index-16334ca6.js";import"./useMutation-302e202b.js";import"./utils-0507c293.js";import"./useQuery-e8d2bc3e.js";import"./InfoCircleFilled-caf22935.js";const K="_form_1n5i5_1",Q="_row_1n5i5_18",z="_label_1n5i5_22",J="_input_1n5i5_31",W="_btns_1n5i5_35",i={form:K,row:Q,label:z,input:J,btns:W};function oe(){const[_,f]=p.useState([]),[T,m]=p.useState(!1),[t,C]=p.useState(),v=q(F),[j]=M(),{data:w,isLoading:I}=V({}),{t:o}=N(),R=a=>a&&a<=L().endOf("day").add(-1,"day"),k=U({config:{onSuccess:()=>{H.success(o("messages.register_success"))}}}),S=async a=>{m(!0);const b=await A({city_id:a});b.message||f(b),m(!1)},d=[{key:"branch_id",label:e.jsxs(s.Text,{children:["Trung tâm Kiness ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsxs(c,{gutter:24,children:[e.jsx(r,{span:7,children:e.jsx(l.Item,{name:"city_id",rules:[...n.required],children:e.jsx(u,{loading:I,placeholder:"Chọn tỉnh, thành phố",style:{width:"100%"},onChange:S,options:w||[]})})}),e.jsx(r,{span:13,children:e.jsx(l.Item,{name:"branch_id",rules:[...n.required],children:e.jsx(u,{loading:T,placeholder:"Chọn chi nhánh",style:{width:"100%"},options:_||[]})})})]})},{key:"fullname",label:e.jsxs(s.Text,{children:["Tên người đăng ký ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(r,{span:7,children:e.jsx(l.Item,{name:"fullname",rules:[...n.required,...n.people_name],children:e.jsx(x,{placeholder:"Họ và tên"})})})},{key:"gender",label:e.jsxs(s.Text,{children:["Giới tính ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(r,{children:e.jsx(l.Item,{name:"gender",rules:[...n.required],initialValue:"0",children:e.jsxs(h.Group,{children:[e.jsx(h,{value:"0",children:" Nam "}),e.jsx(h,{value:"1",children:" Nữ "})]})})})},{key:"level",label:e.jsxs(s.Text,{children:["Cấp ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(l.Item,{name:"level",wrapperCol:{span:20},rules:[...n.required],children:e.jsx(u,{placeholder:"Chọn",options:[{value:"Mẫu giáo",label:"Mẫu giáo"},{value:"Lớp 1",label:"Lớp 1"},{value:"Lớp 2",label:"Lớp 2"},{value:"Lớp 3",label:"Lớp 3"},{value:"Lớp 4",label:"Lớp 4"},{value:"Lớp 5",label:"Lớp 5"},{value:"Lớp 6",label:"Lớp 6"},{value:"Lớp 7",label:"Lớp 7"},{value:"Lớp 8",label:"Lớp 8"},{value:"Lớp 9",label:"Lớp 9"},{value:"Lớp 10",label:"Lớp 10"},{value:"Lớp 11",label:"Lớp 11"},{value:"Lớp 12",label:"Lớp 12"}]})})},{key:"date",label:e.jsxs(s.Text,{children:["Ngày đặt trải nghiệm"," ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(l.Item,{name:"date",wrapperCol:{span:7},rules:[...n.required],children:e.jsx(G,{onChange:a=>C(a),value:t!=null&&t.isValid()?t:void 0,format:g,placeholder:g.toLowerCase(),name:"date",disabledDate:R})})},{key:"phone_number",label:e.jsxs(s.Text,{children:["Số điện thoại ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(l.Item,{name:"phone_number",wrapperCol:{span:7},rules:[...n.required,...n.phone],children:e.jsx(x,{placeholder:"Số điện thoại"})})},{key:"address",label:e.jsxs(s.Text,{children:["Địa chỉ ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(l.Item,{name:"address",wrapperCol:{span:20},rules:[...n.required],children:e.jsx(x,{placeholder:"Địa chỉ"})})},{key:"detail",label:e.jsx(s.Text,{children:"Chi tiết"}),input:e.jsx(l.Item,{name:"detail",wrapperCol:{span:20},children:e.jsx(P,{rows:5,placeholder:"Chi tiết"})})}],D=a=>{k.mutate({...a,date:L(t).format(O),created_by_user_id:v.user_id||1}),j.resetFields()};return e.jsxs(l,{className:i.form,form:j,onFinish:D,children:[d==null?void 0:d.map(a=>e.jsxs(c,{className:i.row,children:[e.jsx(r,{className:i.label,style:{width:200},children:a.label}),e.jsx(r,{flex:"auto",className:i.input,children:a.input})]},a.key)),e.jsxs(c,{gutter:24,className:i.btns,children:[e.jsx(r,{offset:12,children:e.jsx(l.Item,{children:e.jsx(y,{type:"default",htmlType:"reset",children:e.jsx(B,{to:E,children:o("all.btn_cancel")})})})}),e.jsx(r,{children:e.jsx(l.Item,{children:e.jsx(y,{type:"primary",htmlType:"submit",children:o("all.btn_register")})})})]})]})}export{oe as default};
