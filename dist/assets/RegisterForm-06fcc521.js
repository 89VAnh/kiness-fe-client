import{r as d,bR as F,bS as N,V as v,Q as e,T as s,L as c,A as a,bT as B,bC as b,B as g,b9 as O,bU as E,bD as f,bF as U}from"./index-b1f5c75a.js";import{b as P,F as t,R as r}from"./validator-90de51cf.js";import{d as V}from"./TextArea-24ceaad7.js";import{a as G}from"./branch.loader-58a33e31.js";import{u as H,D as K,m as M}from"./city.loader-d861d207.js";import{R as h,g as A}from"./branch.service-86cbabec.js";import{S as p}from"./index-24839470.js";import{I as m}from"./index-3fe60932.js";import"./useMutation-0d47789b.js";import"./utils-0507c293.js";import"./useQuery-1a333170.js";import"./InfoCircleFilled-1fd03163.js";const Q="_form_1n5i5_1",z="_row_1n5i5_18",J="_label_1n5i5_22",W="_input_1n5i5_31",X="_btns_1n5i5_35",l={form:Q,row:z,label:J,input:W,btns:X};function de(){const[_,T]=d.useState([]),[C,x]=d.useState(!1),[i,w]=d.useState(),k=F(N),[u]=P(),{data:I,isLoading:R}=H({}),{t:j}=v(),S=n=>n&&n<=f().endOf("day").add(-1,"day"),D=G({config:{onSuccess:()=>{M.success("Đăng ký thành công!")}}}),L=async n=>{x(!0);const y=await A({city_id:n});y.message||T(y),x(!1)},o=[{key:"branch_id",label:e.jsxs(s.Text,{children:["Trung tâm Kiness ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsxs(c,{gutter:24,children:[e.jsx(a,{span:7,children:e.jsx(t.Item,{name:"city_id",rules:[...r.required],children:e.jsx(p,{loading:R,placeholder:"Chọn tỉnh, thành phố",style:{width:"100%"},onChange:L,options:I||[]})})}),e.jsx(a,{span:13,children:e.jsx(t.Item,{name:"branch_id",rules:[...r.required],children:e.jsx(p,{loading:C,placeholder:"Chọn chi nhánh",style:{width:"100%"},options:_||[]})})})]})},{key:"fullname",label:e.jsxs(s.Text,{children:["Tên người ĐK kiểm tra"," ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(a,{span:7,children:e.jsx(t.Item,{name:"fullname",rules:[...r.required,...r.people_name],children:e.jsx(m,{placeholder:"Họ và tên"})})})},{key:"gender",label:e.jsxs(s.Text,{children:["Giới tính ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(a,{children:e.jsx(t.Item,{name:"gender",rules:[...r.required],initialValue:"0",children:e.jsxs(h.Group,{children:[e.jsx(h,{value:"0",children:" Nam "}),e.jsx(h,{value:"1",children:" Nữ "})]})})})},{key:"level",label:e.jsxs(s.Text,{children:["Cấp ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(t.Item,{name:"level",wrapperCol:{span:20},rules:[...r.required],children:e.jsx(p,{placeholder:"Chọn",options:B})})},{key:"date",label:e.jsxs(s.Text,{children:["Ngày đặt kiểm tra ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(t.Item,{name:"date",wrapperCol:{span:7},rules:[...r.required],children:e.jsx(K,{onChange:n=>w(n),value:i!=null&&i.isValid()?i:void 0,format:b,placeholder:b.toLowerCase(),name:"date",disabledDate:S})})},{key:"phone_number",label:e.jsxs(s.Text,{children:["Số điện thoại ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(t.Item,{name:"phone_number",wrapperCol:{span:7},rules:[...r.required,...r.phone],children:e.jsx(m,{placeholder:"Số điện thoại"})})},{key:"address",label:e.jsxs(s.Text,{children:["Địa chỉ ",e.jsx(s.Text,{type:"danger",children:"*"})]}),input:e.jsx(t.Item,{name:"address",wrapperCol:{span:20},rules:[...r.required],children:e.jsx(m,{placeholder:"Địa chỉ"})})},{key:"detail",label:e.jsx(s.Text,{children:"Chi tiết"}),input:e.jsx(t.Item,{name:"detail",wrapperCol:{span:20},children:e.jsx(V,{rows:5,placeholder:"Chi tiết"})})}],q=n=>{D.mutate({...n,date:f(i).format(U),created_by_user_id:k.user_id||1}),u.resetFields()};return e.jsxs(t,{className:l.form,form:u,onFinish:q,children:[o==null?void 0:o.map(n=>e.jsxs(c,{className:l.row,children:[e.jsx(a,{className:l.label,style:{width:200},children:n.label}),e.jsx(a,{flex:"auto",className:l.input,children:n.input})]},n.key)),e.jsxs(c,{gutter:24,className:l.btns,children:[e.jsx(a,{offset:12,children:e.jsx(t.Item,{children:e.jsx(g,{type:"default",htmlType:"reset",children:e.jsx(O,{to:E,children:j("all.btn_cancel")})})})}),e.jsx(a,{children:e.jsx(t.Item,{children:e.jsx(g,{type:"primary",htmlType:"submit",children:j("all.btn_register")})})})]})]})}export{de as default};
