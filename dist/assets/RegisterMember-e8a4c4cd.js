import{k as q,u as D,r as m,j as e,T as n,D as M,i as l,b as s,be as T,ad as b,bf as R,bg as L}from"./index-fcaec6de.js";import{u as B,m as x,D as P,g as O}from"./branch.service-95ecb03a.js";import{b as V,F as t,R as a}from"./validator-42b30c1a.js";import{S as G}from"./Sidebar-87a3a51f.js";import{r as K}from"./render-adae4aad.js";import{S as N}from"./index-5c4e998b.js";import{I as d}from"./index-3569ca31.js";import{R as j}from"./index-d114bcee.js";import"./useQuery-ead93c15.js";import"./utils-0507c293.js";import"./index-2f3a4b7c.js";const U=async o=>{var c;return(await((c=q)==null?void 0:c.post("customers/create",o))).data},X=({config:o})=>V({onMutate:()=>{},onError:()=>{},onSuccess:()=>{},...o,mutationFn:U}),z="_container_l203x_1",A="_list-item_l203x_4",H="_label_l203x_8",J="_footer-form_l203x_16",r={container:z,"list-item":"_list-item_l203x_4",listItem:A,label:H,"footer-form":"_footer-form_l203x_16",footerForm:J};function le(){const{t:o}=D(),[h]=t.useForm(),[c,_]=m.useState(),I=K(o),[y,C]=m.useState([]),[S,u]=m.useState(!1),{data:w,isLoading:k}=B({}),p=X({config:{onSuccess:i=>{if(!i.results){x.error(i.message);return}x.success("Đăng ký thành công!")},onError:()=>{x.error("Có lỗi xảy ra! Vui lòng thử lại")}}}),v=()=>{h.validateFields().then(i=>{p.mutate({...i,birthday:R(c).format(L),branch_id:1})})},E=async i=>{u(!0);const g=await O({city_id:i});C(g),u(!1)},F=()=>e.jsxs("div",{className:r.container,children:[e.jsx(n.Title,{level:3,children:"Đăng ký tham gia thành viên KINESS"}),e.jsx(M,{}),e.jsxs(t,{form:h,className:r.content,children:[e.jsxs(l,{gutter:24,className:r.listItem,children:[e.jsx(s,{span:6,children:e.jsxs(n.Text,{className:r.label,children:["Trung tâm Kiness"," ",e.jsx(n.Text,{type:"danger",children:"*"})]})}),e.jsx(s,{span:6,children:e.jsx(t.Item,{name:"city_id",rules:[...a.required],children:e.jsx(N,{loading:k,onSelect:E,options:w,placeholder:"Chọn tỉnh, thành phố"})})}),e.jsx(s,{span:12,children:e.jsx(t.Item,{name:"branch_id",rules:[...a.required],children:e.jsx(N,{placeholder:"Chọn chi nhánh",loading:S,options:y})})})]}),e.jsxs(l,{gutter:24,className:r.listItem,children:[e.jsx(s,{span:6,children:e.jsxs(n.Text,{className:r.label,children:["Tên tài khoản ",e.jsx(n.Text,{type:"danger",children:"*"})]})}),e.jsx(s,{span:6,children:e.jsx(t.Item,{name:"customer_id",rules:[...a.required,...a.username],children:e.jsx(d,{placeholder:"Tên tài khoản"})})}),e.jsx(s,{span:12,children:e.jsx(n.Text,{type:"secondary",children:"(Tối đa 6-8 chữ/số)"})})]}),e.jsxs(l,{gutter:24,className:r.listItem,children:[e.jsx(s,{span:6,children:e.jsxs(n.Text,{className:r.label,children:["Mật khẩu ",e.jsx(n.Text,{type:"danger",children:"*"})]})}),e.jsx(s,{span:6,children:e.jsx(t.Item,{name:"password",rules:[...a.required,...a.password],children:e.jsx(d.Password,{placeholder:"Mật khẩu"})})})]}),e.jsxs(l,{gutter:24,className:r.listItem,children:[e.jsx(s,{span:6,children:e.jsxs(n.Text,{className:r.label,children:["Xác nhận mật khẩu"," ",e.jsx(n.Text,{type:"danger",children:"*"})]})}),e.jsx(s,{span:6,children:e.jsx(t.Item,{name:"confirm-password",rules:[...a.required,({getFieldValue:i})=>({validator(g,f){return!f||i("password")===f?Promise.resolve():Promise.reject(new Error("Mật khẩu phải trùng nhau "))}})],children:e.jsx(d.Password,{placeholder:" Xác nhận mật khẩu"})})})]}),e.jsxs(l,{gutter:24,className:r.listItem,children:[e.jsx(s,{span:6,children:e.jsxs(n.Text,{className:r.label,children:["Tên thành viên"," ",e.jsx(n.Text,{type:"danger",children:"*"})]})}),e.jsx(s,{span:6,children:e.jsx(t.Item,{name:"customer_name",rules:[...a.required],children:e.jsx(d,{placeholder:"Tên thành viên"})})})]}),e.jsxs(l,{gutter:24,className:r.listItem,children:[e.jsx(s,{span:6,children:e.jsx(n.Text,{className:r.label,children:"Ngày sinh"})}),e.jsx(s,{span:6,children:e.jsx(t.Item,{children:e.jsx(P,{style:{width:"100%"},onChange:i=>_(i),value:c!=null&&c.isValid()?c:void 0,format:T,placeholder:T.toLowerCase()})})})]}),e.jsxs(l,{gutter:24,className:r.listItem,children:[e.jsx(s,{span:6,children:e.jsx(n.Text,{className:r.label,children:"Giới tính"})}),e.jsx(s,{span:6,children:e.jsx(t.Item,{name:"gender",initialValue:1,children:e.jsxs(j.Group,{defaultValue:1,children:[e.jsx(j,{value:1,children:"Nam"}),e.jsx(j,{value:0,children:"Nữ"})]})})})]}),e.jsxs(l,{gutter:24,className:r.listItem,children:[e.jsx(s,{span:6,children:e.jsx(n.Text,{className:r.label,children:"Địa chỉ"})}),e.jsx(s,{span:18,children:e.jsx(t.Item,{name:"address",children:e.jsx(d,{placeholder:"Địa chỉ"})})})]}),e.jsxs(l,{gutter:24,className:r.listItem,children:[e.jsx(s,{span:6,children:e.jsxs(n.Text,{className:r.label,children:["Số điện thoại ",e.jsx(n.Text,{type:"danger",children:"*"})]})}),e.jsx(s,{span:6,children:e.jsx(t.Item,{name:"phone_number",rules:[...a.required,...a.phone],children:e.jsx(d,{placeholder:"Số điện thoại"})})})]}),e.jsxs(l,{gutter:24,className:r.listItem,children:[e.jsx(s,{span:6,children:e.jsxs(n.Text,{className:r.label,children:["Email ",e.jsx(n.Text,{type:"danger",children:"*"})]})}),e.jsx(s,{span:6,children:e.jsx(t.Item,{name:"email",rules:[...a.required,...a.email],children:e.jsx(d,{placeholder:"Email"})})})]}),e.jsx(l,{className:r.footerForm,children:e.jsxs(s,{span:24,children:[e.jsx(b,{children:o("all.btn_cancel")}),e.jsx(b,{className:"filled",htmlType:"submit",onClick:v,loading:p.isLoading,children:o("all.btn_confirm")})]})})]})]});return e.jsx(G,{children:F(),items:I})}export{le as default};
